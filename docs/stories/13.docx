Technical Document #13 â€” AI-Assisted Bookkeeping & Ledger System
1. Introduction
The primary barrier to tax compliance in the informal sector is the lack of structured record-keeping. Informal operators (hairdressers, market traders, artisans) rarely maintain ledgers, making accurate tax assessment impossible.
This document outlines the "Invisible Accounting" architecture. It transforms unstructured inputs (WhatsApp voice notes, text messages, images, and USSD codes) into a structured, double-entry standard ledger system without requiring the user to understand accounting principles.
2. Bookkeeping Goals
Zero-Friction Input: Enable users to record transactions in natural language (e.g., "I sold 50 cedis of rice").
Automated Categorization: Use NLP to distinguish between business income, personal expenses, and Cost of Goods Sold (COGS).
Real-Time Feedback: Provide users with daily/weekly Profit & Loss (P&L) summaries to incentivize usage.
Tax Readiness: Automatically aggregate data for Modified Taxation System (MTS) filing.
3. High-Level Bookkeeping Architecture
Code snippet
graph TD
    User[User Input] --> Channel[Channel Layer]
    Channel -->|Voice/Text/Image| Ingestion[Ingestion Engine]
    
    subgraph "Processing Core"
    Ingestion --> STT[Voice-to-Text API]
    Ingestion --> OCR[Image Recognition]
    STT --> NLP[Natural Language Processor]
    OCR --> NLP
    NLP --> Class[Categorization Engine]
    end
    
    subgraph "Ledger System"
    Class --> DB[(Transactional DB)]
    DB --> Agg[Aggregation Service]
    Agg --> Tax[MTS Tax Calculator]
    end
    
    Agg --> Insights[User Dashboard/Feedback]

4. Data Ingestion Methods
The system supports four specific input methods designed for the informal environment.
Method 1: Conversational Voice (Primary)
User Action: Sends a WhatsApp voice note in Twi, Ga, or English.
Example: "Me tÉ”n rice 5 bags, 250 cedis." (I sold 5 bags of rice for 250 cedis).
Tech Stack: Google Speech-to-Text $\rightarrow$ Translation Layer $\rightarrow$ Intent Extraction.
Method 2: Unstructured Text
User Action: Types a short message.
Example: "Transport 20ghs" or "Sales 500".
Logic: Regex parsing for Currency (GHS, cedis) + Keyword Mapping (Transport = Expense).
Method 3: USSD Numeric Entry (Fallback)
User Action: Dials shortcode.
Flow:
Select: 1. Income | 2. Expense
Enter Amount: 50
Select Category: 1. Sales | 2. Service
Result: Creates a structured record directly.
Method 4: Image/Media (Receipts)
User Action: Uploads a photo of a supplier invoice or hand-written notebook.
Tech Stack: Azure Vision API / Google Cloud Vision (OCR).
Logic: Extracts Date, Total Amount, and Vendor Name.
5. The Ledger Logic (The "Brain")
Although the user sees a simple list, the backend maintains a robust accounting structure.
5.1 Schema Design
The database stores transactions in a format compliant with GRA audit standards.
Field
Type
Description
transaction_id
UUID
Unique identifier
user_id
UUID
Links to Taxpayer Profile
timestamp
DateTime
Time of transaction
raw_input
String
Original text/transcription (for audit)
type
Enum
INCOME or EXPENSE
category
String
e.g., Inventory, Transport, Utilities, Sales
amount
Decimal
Transaction value
confidence_score
Float
AI certainty (0.0 - 1.0)
verification_status
Enum
AUTO_VERIFIED, USER_CONFIRMED, FLAGGED

5.2 Categorization Heuristics
The system uses a hierarchy of rules to assign categories:
Keyword Match (Fastest):
"Fuel", "Petrol", "Trotro" $\rightarrow$ Transport & Logistics
"Airtime", "Data" $\rightarrow$ Utilities
"Stock", "Goods", "Restock" $\rightarrow$ Inventory (COGS)
Contextual Inference (AI):
Input: "Madam Beatrice paid me balance" $\rightarrow$ Accounts Receivable / Income
Input: "Fixing the sewing machine" $\rightarrow$ Repairs & Maintenance
Anomaly Detection (Risk Engine):
If a "Barber" records an expense for "Fertilizer" $\rightarrow$ Flag for review (Mismatch business type).
6. Detailed Workflows
6.1 The Income Recording Flow
Input: User sends "Made 300 cedis today" via WhatsApp.
Processing:
Extract Amount: 300
Extract Intent: Income
Extract Date: Today
Confirmation: System replies: "âœ… Recorded: Sales Income of GHS 300. Is this correct?"
Commit: User taps "Yes" (or ignores). Data is written to DB.
Tax Impact: MTS Estimated Tax liability updates in background.
6.2 The Expense Recording Flow
Input: User sends "Paid shop rent 200".
Processing:
Extract Amount: 200
Extract Intent: Expense
Category: Rent/Lease
Commit: Data written to DB.
Insight: System checks limits. If rent is unusually high compared to income history, system prompts: "Note: Your rent is 50% of your income this month."
7. Output & Value Generation (The "Carrot")
To ensure users keep using the system, we provide value beyond taxation.
7.1 Daily "Cash-Up" Report
At 6:00 PM (configurable), the user receives a WhatsApp summary:
ðŸ“Š Daily Summary
Sold: GHS 450
Spent: GHS 120
Profit: GHS 330
Great job! You are 10% above yesterday.
7.2 Creditworthiness Profile
The system generates a standardized "Bookkeeping Report" (PDF) that the user can download to show banks or micro-lenders, incentivizing accurate record-keeping.
8. Integration with Tax Filing (MTS)
This module connects directly to Technical Document #1 (API Integration).
Aggregation: At the end of the month, the system sums all INCOME records.
Calculation: Applies the MTS presumptive tax rate (e.g., 3% of Turnover or Flat Rate).
Pre-filling: When the user initiates the Filing Flow, the input field "Total Turnover" is pre-filled with the aggregated ledger data.
Correction: User can override the pre-filled amount, but significant deviations trigger a "Risk Flag" on the Officer Dashboard.
9. Offline & Low-Connectivity Strategy
USSD Buffering: If WhatsApp is down, USSD entries are stored in a Redis queue and synced to the main Ledger DB once processed.
Local Caching: For future app iterations, bookkeeping data is cached locally on the device and synced when the internet returns.
10. Implementation Timeline
Week 1: Define keyword dictionaries for Twi, Ga, Ewe, and English.
Week 2: Integrate Speech-to-Text API and test accent recognition.
Week 3: Build the Transaction Database and Aggregation Logic.
Week 4: Develop WhatsApp response templates and Confirmation Flows.
Week 5: Pilot with 50 users (mixed business types) to train the categorization model.
Week 6: Full integration with MTS Tax Calculator.
11. Risks & Mitigations
Risk
Mitigation
Data Privacy
User financial data is encrypted (AES-256) and strictly access-controlled (Tier 3 Data).
Inaccurate Voice Rec
User confirmation step ("Did you mean...?") ensures data integrity before committing.
"GIGO" (Garbage In)
Anomaly detection algorithms flag entries that statistically deviate from business type norms.
User Fatigue
Gamification (Badges for 7-day streaks) and "One-tap" shortcuts for frequent transactions.

12. Conclusion
The AI-Assisted Bookkeeping module shifts the burden of accounting from the user to the system. By turning everyday speech into structured financial data, GRA gains visibility into the actual economic activity of the informal sector, while the taxpayer gains a valuable business management tool.
